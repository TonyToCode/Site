<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSM Competition Program: The Pathway to Excellence</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://threejs.org/examples/js/loaders/STLLoader.js"></script>
    <script src="assets/js/config.js"></script>
    <script src="assets/js/locations.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/rsm-official.css">
    <link rel="stylesheet" href="assets/css/premium-design.css">

    <style>
        /* Inline customizations for specific elements */

        /* Smooth scrolling behavior */
        html {
            scroll-behavior: smooth;
        }
        
        /* Styling for the accordion */
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        /* Modal styles */
        #gemini-modal {
            transition: opacity 0.3s ease;
        }
        
        /* Hide Google My Maps header */
        .google-maps-container {
            position: relative;
            overflow: hidden;
        }
        
        .google-maps-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 40px;
            background: white;
            z-index: 10;
            pointer-events: none;
        }
        
        /* Skip link styles */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--rsm-primary);
            color: white;
            padding: 8px;
            text-decoration: none;
            border-radius: 0 0 4px 4px;
            z-index: 1000;
            font-size: 14px;
            font-weight: 600;
        }
        
        .skip-link:focus {
            top: 0;
        }
        
        /* Focus indicators */
        .rsm-nav-link:focus,
        .btn-primary:focus,
        button:focus {
            outline: 2px solid var(--rsm-secondary);
            outline-offset: 2px;
        }
        
        /* Stage card hover effects */
        .rsm-card.group:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 93, 171, 0.15);
        }
        
        .rsm-card.group:hover::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0, 93, 171, 0.03) 0%, rgba(255, 199, 44, 0.03) 100%);
            border-radius: inherit;
            pointer-events: none;
        }
        
        /* Testimonial carousel styles */
        .testimonial-container {
            overflow: hidden;
            position: relative;
            width: 100%;
        }
        
        .testimonial-track {
            display: flex;
            animation: scroll 60s linear infinite;
            width: calc(320px * 16); /* 16 testimonials * 320px width */
        }
        
        .testimonial-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 0 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-width: 280px;
            max-width: 280px;
            flex-shrink: 0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .testimonial-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        @keyframes scroll {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(calc(-320px * 12)); /* Move by 12 cards to loop seamlessly */
            }
        }
        
        /* Pause animation on hover */
        .testimonial-container:hover .testimonial-track {
            animation-play-state: paused;
        }
    </style>
</head>
<body class="premium-body">

    <!-- Skip Navigation Links -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#main-navigation" class="skip-link">Skip to navigation</a>

    <header class="rsm-header sticky top-0 z-40" role="banner">
        <div class="rsm-container">
            <div class="flex justify-between items-center py-4">
                <!-- Logo Section with SVG -->
                <a href="#" class="flex items-center group" aria-label="RSM Competition Program - Home">
                    <img src="assets/RSM/rsm.svg" alt="RSM Competition Program Logo" class="h-12 w-auto transition-transform group-hover:scale-105">
                </a>
                
                <!-- Desktop Navigation -->
                <nav id="main-navigation" class="hidden xl:flex items-center space-x-1" role="navigation" aria-label="Main navigation">
                    <a href="#why-rsm" class="rsm-nav-link group" aria-describedby="why-rsm-desc">
                        <i data-feather="target" class="w-4 h-4 mr-2 flex-shrink-0 group-hover:text-rsm-secondary" aria-hidden="true"></i>
                        <span class="hidden 2xl:inline">Why Competitions?</span>
                        <span class="2xl:hidden">Why?</span>
                    </a>
                    <a href="#pathway" class="rsm-nav-link group" aria-describedby="pathway-desc">
                        <i data-feather="trending-up" class="w-4 h-4 mr-2 flex-shrink-0 group-hover:text-rsm-secondary" aria-hidden="true"></i>
                        <span class="hidden 2xl:inline">The RSM Pathway</span>
                        <span class="2xl:hidden">Pathway</span>
                    </a>
                    <a href="#programs" class="rsm-nav-link group" aria-describedby="programs-desc">
                        <i data-feather="book-open" class="w-4 h-4 mr-2 flex-shrink-0 group-hover:text-rsm-secondary" aria-hidden="true"></i>
                        <span>Programs</span>
                    </a>
                    <a href="#coaches" class="rsm-nav-link group" aria-describedby="coaches-desc">
                        <i data-feather="users" class="w-4 h-4 mr-2 flex-shrink-0 group-hover:text-rsm-secondary" aria-hidden="true"></i>
                        <span class="hidden 2xl:inline">Our Team</span>
                        <span class="2xl:hidden">Team</span>
                    </a>
                    <a href="#contact" class="rsm-nav-link group" aria-describedby="contact-desc">
                        <i data-feather="mail" class="w-4 h-4 mr-2 flex-shrink-0 group-hover:text-rsm-secondary" aria-hidden="true"></i>
                        <span>Contact</span>
                    </a>
                </nav>
                
                <!-- Icon-only Navigation for medium screens -->
                <nav class="hidden lg:flex xl:hidden items-center space-x-2" role="navigation" aria-label="Compact navigation">
                    <a href="#why-rsm" class="rsm-nav-link group p-3" aria-label="Why Competitions?">
                        <i data-feather="target" class="w-5 h-5 group-hover:text-rsm-secondary" aria-hidden="true"></i>
                    </a>
                    <a href="#pathway" class="rsm-nav-link group p-3" aria-label="The RSM Pathway">
                        <i data-feather="trending-up" class="w-5 h-5 group-hover:text-rsm-secondary" aria-hidden="true"></i>
                    </a>
                    <a href="#programs" class="rsm-nav-link group p-3" aria-label="Programs">
                        <i data-feather="book-open" class="w-5 h-5 group-hover:text-rsm-secondary" aria-hidden="true"></i>
                    </a>
                    <a href="#coaches" class="rsm-nav-link group p-3" aria-label="Our Team">
                        <i data-feather="users" class="w-5 h-5 group-hover:text-rsm-secondary" aria-hidden="true"></i>
                    </a>
                    <a href="#contact" class="rsm-nav-link group p-3" aria-label="Contact">
                        <i data-feather="mail" class="w-5 h-5 group-hover:text-rsm-secondary" aria-hidden="true"></i>
                    </a>
                </nav>
                
                <!-- CTA Button -->
                <div class="hidden md:flex items-center space-x-3">
                    <a href="#contact" class="btn-primary flex-shrink-0" aria-label="Schedule a free assessment">
                        <i data-feather="calendar" class="w-4 h-4 mr-2 flex-shrink-0" aria-hidden="true"></i>
                        <span class="hidden xl:inline">Schedule Assessment</span>
                        <span class="xl:hidden">Schedule</span>
                    </a>
                </div>
                
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-button" class="lg:hidden p-2 rounded-md hover:bg-rsm-gray-100 transition-colors" 
                        aria-label="Open mobile menu" aria-expanded="false" aria-controls="mobile-menu">
                    <i data-feather="menu" class="w-6 h-6 text-rsm-primary" aria-hidden="true"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden lg:hidden border-t border-rsm-gray-200 bg-white" role="navigation" aria-label="Mobile navigation">
            <div class="rsm-container py-4 space-y-2">
                <a href="#why-rsm" class="rsm-nav-link mobile flex items-center" aria-describedby="why-rsm-desc">
                    <i data-feather="target" class="w-4 h-4 mr-3" aria-hidden="true"></i>
                    Why Competitions?
                </a>
                <a href="#pathway" class="rsm-nav-link mobile flex items-center" aria-describedby="pathway-desc">
                    <i data-feather="trending-up" class="w-4 h-4 mr-3" aria-hidden="true"></i>
                    The RSM Pathway
                </a>
                <a href="#programs" class="rsm-nav-link mobile flex items-center" aria-describedby="programs-desc">
                    <i data-feather="book-open" class="w-4 h-4 mr-3" aria-hidden="true"></i>
                    Programs
                </a>
                <a href="#coaches" class="rsm-nav-link mobile flex items-center" aria-describedby="coaches-desc">
                    <i data-feather="users" class="w-4 h-4 mr-3" aria-hidden="true"></i>
                    Our Team
                </a>
                <a href="#contact" class="rsm-nav-link mobile flex items-center" aria-describedby="contact-desc">
                    <i data-feather="mail" class="w-4 h-4 mr-3" aria-hidden="true"></i>
                    Contact
                </a>
                <div class="pt-3 border-t border-rsm-gray-200">
                    <a href="#contact" class="btn-primary btn-small w-full flex items-center justify-center" aria-label="Schedule a free assessment">
                        <i data-feather="calendar" class="w-4 h-4 mr-2" aria-hidden="true"></i>
                        Schedule Assessment
                    </a>
                </div>
            </div>
        </div>
    </header>

    <main id="main-content" role="main">
        <section class="rsm-hero" role="region" aria-labelledby="hero-heading">
            <div class="rsm-container">
                <h1 id="hero-heading" class="rsm-hero-title">
                    Beyond the Classroom: <br class="hidden md:block" /> The RSM Pathway to Competitive Excellence
                </h1>
                <p class="rsm-hero-subtitle">
                    We transform talented students into confident, resilient problem-solvers who excel in the nation's most prestigious math competitions—and beyond.
                </p>
                <div class="mt-10 flex flex-col sm:flex-row justify-center items-center gap-4">
                    <a href="#contact" class="btn-primary btn-large shadow-xl">
                        <i data-feather="calendar" class="w-5 h-5 mr-2"></i>
                        Schedule a Free Assessment
                    </a>
                    <a href="#testimonials" class="bg-white/10 backdrop-blur-sm text-white border-2 border-white/30 hover:bg-white hover:text-rsm-primary font-semibold py-4 px-8 rounded-lg transition-all shadow-lg">
                        <i data-feather="star" class="w-5 h-5 mr-2 inline"></i>
                        See Our Students' Success Stories ↓
                    </a>
                </div>
            </div>
        </section>

        <section id="why-rsm" class="rsm-section premium-enhance">
            <div class="rsm-container">
                <div class="text-center mb-16">
                    <h2 class="text-rsm-h2">Why Math Competitions?</h2>
                    <p class="mt-4 text-lg text-rsm-body max-w-2xl mx-auto">It's About Building a Lifelong Intellectual Edge.</p>
                </div>
                <div class="grid md:grid-cols-3 gap-8 md:gap-12 text-center">
                    <div class="rsm-card-feature premium-hover-effect">
                        <div class="bg-rsm-primary text-white w-16 h-16 rounded-full mx-auto flex items-center justify-center mb-6">
                            <i data-feather="cpu" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-rsm-h3 mb-3">Develop Elite Problem-Solving</h3>
                        <p class="text-rsm-body">Our students learn to tackle complex, non-standard problems, developing the mental agility and creativity sought by top universities and innovative companies.</p>
                    </div>
                    <div class="rsm-card-feature premium-hover-effect">
                        <div class="bg-rsm-primary text-white w-16 h-16 rounded-full mx-auto flex items-center justify-center mb-6">
                            <i data-feather="award" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-rsm-h3 mb-3">Gain a Competitive Advantage</h3>
                        <p class="text-rsm-body">Success in competitions like the AMC series and AIME provides a powerful differentiator on college applications, demonstrating ability at the highest level.</p>
                    </div>
                    <div class="rsm-card-feature premium-hover-effect">
                        <div class="bg-rsm-primary text-white w-16 h-16 rounded-full mx-auto flex items-center justify-center mb-6">
                            <i data-feather="trending-up" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-rsm-h3 mb-3">Cultivate Resilience & Character</h3>
                        <p class="text-rsm-body">Competitions teach students to perform under pressure, learn from setbacks, and embrace challenges—invaluable skills for a successful life.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="pathway" class="rsm-section-alt">
            <div class="rsm-container">
                <div class="text-center mb-16">
                    <h2 class="text-rsm-h2">Your Child's Journey to the National Stage</h2>
                    <p class="mt-4 text-lg text-rsm-body max-w-3xl mx-auto">A clear progression from foundational skills to elite competition. This pathway is more than a series of classes; it's a long-term mentorship where students receive continuous guidance from our expert coaches. Our coaches guide students as they progress from local contests to national-level competitions like the AMC and AIME, offering advanced training and strategic preparation to help them succeed.</p>
                    <div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-2xl mx-auto">
                        <p class="text-blue-800 text-sm font-medium flex items-center justify-center">
                            <i data-feather="info" class="w-4 h-4 mr-2"></i>
                            Click on any stage below to explore detailed curriculum, sample problems, and learning outcomes
                        </p>
                    </div>
                </div>
                <div class="relative">
                    <div class="hidden md:block absolute top-1/2 left-0 w-full h-1 bg-rsm-secondary/50 -translate-y-1/2"></div>
                    
                    <div class="grid md:grid-cols-4 gap-10 relative">
                        <a href="pages/stage1-foundational-spark.html" class="rsm-card text-center border-t-4 border-rsm-secondary block hover:shadow-xl hover:-translate-y-2 transition-all duration-300 cursor-pointer group">
                             <div class="rsm-badge mb-2">STAGE 1</div>
                             <h4 class="text-rsm-h3 mb-2 group-hover:text-rsm-blue transition-colors">Foundational Spark</h4>
                             <p class="text-rsm-small mb-3">(Grades 3-6)</p>
                             <p class="text-rsm-body text-sm">Focus on confidence and a love for creative problem-solving via competitions like Purple Comet & MOEMS.</p>
                             <div class="mt-4 flex items-center justify-center text-rsm-blue text-sm font-semibold group-hover:text-rsm-dark-blue">
                                 <span>Learn More</span>
                                 <i data-feather="arrow-right" class="w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"></i>
                             </div>
                        </a>
                        <a href="pages/stage2-building-momentum.html" class="rsm-card text-center border-t-4 border-rsm-secondary block hover:shadow-xl hover:-translate-y-2 transition-all duration-300 cursor-pointer group">
                            <div class="rsm-badge mb-2">STAGE 2</div>
                             <h4 class="text-rsm-h3 mb-2 group-hover:text-rsm-blue transition-colors">Building Momentum</h4>
                             <p class="text-rsm-small mb-3">(Grades 6-8)</p>
                             <p class="text-rsm-body text-sm">Introduction to the AMC 8 and structured training in our Math Competition Prep (MCP) program.</p>
                             <div class="mt-4 flex items-center justify-center text-rsm-blue text-sm font-semibold group-hover:text-rsm-dark-blue">
                                 <span>Learn More</span>
                                 <i data-feather="arrow-right" class="w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"></i>
                             </div>
                        </a>
                        <a href="pages/stage3-high-school-ascent.html" class="rsm-card text-center border-t-4 border-rsm-secondary block hover:shadow-xl hover:-translate-y-2 transition-all duration-300 cursor-pointer group">
                            <div class="rsm-badge mb-2">STAGE 3</div>
                             <h4 class="text-rsm-h3 mb-2 group-hover:text-rsm-blue transition-colors">High School Ascent</h4>
                             <p class="text-rsm-small mb-3">(Grades 9-12)</p>
                             <p class="text-rsm-body text-sm">Mastery of topics for the AMC 10/12 through our Advanced MCP tracks.</p>
                             <div class="mt-4 flex items-center justify-center text-rsm-blue text-sm font-semibold group-hover:text-rsm-dark-blue">
                                 <span>Learn More</span>
                                 <i data-feather="arrow-right" class="w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"></i>
                             </div>
                        </a>
                        <a href="pages/stage4-elite-level.html" class="rsm-card text-center border-t-4 border-rsm-secondary block hover:shadow-xl hover:-translate-y-2 transition-all duration-300 cursor-pointer group">
                            <div class="rsm-badge mb-2">STAGE 4</div>
                             <h4 class="text-rsm-h3 mb-2 group-hover:text-rsm-blue transition-colors">The Elite Level</h4>
                             <p class="text-rsm-small mb-3">(Invitation Only)</p>
                             <p class="text-rsm-body text-sm">Intensive, Olympiad-level training for AIME & USA(J)MO in our NMCP program.</p>
                             <div class="mt-4 flex items-center justify-center text-rsm-blue text-sm font-semibold group-hover:text-rsm-dark-blue">
                                 <span>Learn More</span>
                                 <i data-feather="arrow-right" class="w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"></i>
                             </div>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section id="programs" class="rsm-section">
            <div class="rsm-container">
                <div class="text-center mb-16">
                    <h2 class="text-rsm-h2">Find Your Child's Perfect Fit</h2>
                    <p class="mt-4 text-lg text-rsm-body max-w-3xl mx-auto">We offer distinct pathways based on a student's experience and ambition, ensuring the right level of challenge and support.</p>
                </div>
                <div class="grid lg:grid-cols-2 gap-8 max-w-5xl mx-auto">
                    <div class="border-2 border-rsm-gold rounded-xl p-8 flex flex-col shadow-lg bg-amber-50/50">
                        <div class="text-rsm-gold font-bold text-sm tracking-wider mb-2">FOUNDATION PROGRAM</div>
                        <h3 class="text-2xl font-bold text-rsm-dark-blue">Math Competition Preparation (MCP)</h3>
                        <p class="text-gray-500 mt-2 mb-6">For students eager to begin their competitive journey. In this program, students dive into foundational topics like number theory, combinatorics, and advanced geometry through engaging, non-standard problems. The goal is to build a deep conceptual understanding and the confidence needed to excel, with a key focus on preparing for and achieving high scores on the AMC 8 and MOEMS.</p>
                        <ul class="space-y-4 text-gray-700 mb-8 flex-grow">
                            <li class="flex items-start"><i data-feather="check-circle" class="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0"></i><span><strong>Ideal For:</strong> Students ready to move beyond standard school math.</span></li>
                            <li class="flex items-start"><i data-feather="check-circle" class="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0"></i><span><strong>Key Focus:</strong> AMC 8, MOEMS, Purple Comet.</span></li>
                            <li class="flex items-start"><i data-feather="check-circle" class="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0"></i><span><strong>Selectivity:</strong> Selective, based on a qualifying admission test.</span></li>
                        </ul>
                        <button class="schedule-assessment-btn w-full text-center bg-rsm-gold text-rsm-dark-blue font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-colors">Schedule an MCP Assessment</button>
                        <button class="generate-problem-btn mt-4 w-full text-center bg-gray-200 text-rsm-dark-blue font-semibold py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors" data-level="mcp">
                            ✨ Generate a Sample Problem
                        </button>
                    </div>
                    <div class="border-2 border-rsm-blue rounded-xl p-8 flex flex-col shadow-lg bg-blue-50/50">
                        <div class="text-rsm-blue font-bold text-sm tracking-wider mb-2">ELITE PROGRAM</div>
                        <h3 class="text-2xl font-bold text-rsm-blue">National Math Competition Prep (NMCP)</h3>
                        <p class="text-gray-500 mt-2 mb-6">For highly advanced students aiming for the national stage. This is where top students receive intensive, Olympiad-level training from our most senior coaches. The curriculum is focused on mastering the complex proof-based problems found in elite competitions. The primary goal is to qualify for the AIME and ultimately compete in the USA(J)MO, the pinnacle of American high school mathematics.</p>
                        <ul class="space-y-4 text-gray-700 mb-8 flex-grow">
                            <li class="flex items-start"><i data-feather="check-circle" class="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0"></i><span><strong>Ideal For:</strong> Experienced competitors with a proven track record.</span></li>
                            <li class="flex items-start"><i data-feather="check-circle" class="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0"></i><span><strong>Key Focus:</strong> AMC 10/12, AIME, USA(J)MO.</span></li>
                            <li class="flex items-start"><i data-feather="check-circle" class="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0"></i><span><strong>Selectivity:</strong> Highly Selective; invitation-only based on elite performance.</span></li>
                        </ul>
                        <a href="pages/nmcp-program.html" class="w-full text-center bg-rsm-blue text-white font-bold py-3 px-6 rounded-lg hover:bg-rsm-dark-blue transition-colors">Learn About the NMCP Path</a>
                        <button class="generate-problem-btn mt-4 w-full text-center bg-gray-200 text-rsm-dark-blue font-semibold py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors" data-level="nmcp">
                           ✨ Generate a Sample Problem
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section id="testimonials" class="py-20 md:py-24 bg-rsm-light-gray overflow-hidden">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-rsm-dark-blue">Don't Just Take Our Word For It. See the Results.</h2>
                    <p class="mt-4 text-lg text-rsm-blue font-semibold">Stories from the RSM Family</p>
                </div>
                
                <!-- Auto-scrolling testimonials -->
                <div class="relative">
                    <div class="testimonial-container">
                        <div class="testimonial-track" id="testimonial-track">
                            <!-- First set of testimonials -->
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=AS" alt="Student photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "RSM didn't just teach me formulas. My coach taught me how to think strategically under pressure. That's what got me to the AIME."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Alex Johnson</p>
                                    <p class="text-xs text-gray-500">AIME Qualifier, Grade 10</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=MG" alt="Parent photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "We saw our daughter's confidence skyrocket. The skills she learned didn't just help her in math; they helped her excel in all her AP classes."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Maria Garcia</p>
                                    <p class="text-xs text-gray-500">Parent of 8th Grader</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=SC" alt="Student photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "Making USAMO was a dream come true. RSM's advanced training prepared me for problems I never thought I could solve."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Sophia Chen</p>
                                    <p class="text-xs text-gray-500">USAMO Qualifier, Grade 11</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=JP" alt="Parent photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "The growth mindset RSM instilled in my son extends far beyond mathematics. He approaches all challenges with confidence now."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Jennifer Park</p>
                                    <p class="text-xs text-gray-500">Parent of 9th Grader</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=EK" alt="Student photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "From struggling with basic algebra to qualifying for AIME in two years. RSM's systematic approach works."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Ethan Kim</p>
                                    <p class="text-xs text-gray-500">AIME Qualifier, Grade 12</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=RW" alt="Parent photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "My daughter went from hating math to loving it. Now she wants to major in mathematics at MIT!"
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Rachel Williams</p>
                                    <p class="text-xs text-gray-500">Parent of 11th Grader</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=DL" alt="Student photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "The collaborative problem-solving sessions taught me that mathematics is beautiful and creative, not just computational."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">David Lee</p>
                                    <p class="text-xs text-gray-500">Student, Grade 7</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=AN" alt="Parent photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "RSM coaches don't just teach problems—they teach students how to become mathematical thinkers for life."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Anna Nguyen</p>
                                    <p class="text-xs text-gray-500">Parent of Twin 6th Graders</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=MS" alt="Student photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "Making the IMO team was the culmination of years of dedicated training at RSM. The foundation they built was incredible."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Michael Smith</p>
                                    <p class="text-xs text-gray-500">IMO Team Member, Grade 12</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=LT" alt="Parent photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "The individual attention and personalized learning path made all the difference for our gifted but struggling child."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Linda Thompson</p>
                                    <p class="text-xs text-gray-500">Parent of 5th Grader</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=JR" alt="Student photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "Purple Comet was my first competition. Now I'm preparing for USAMO. RSM made that journey possible."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Jessica Rodriguez</p>
                                    <p class="text-xs text-gray-500">Student, Grade 10</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=KB" alt="Parent photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "RSM taught my son that struggle is part of learning. Now he embraces challenges instead of avoiding them."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Kevin Brown</p>
                                    <p class="text-xs text-gray-500">Parent of 8th Grader</p>
                                </div>
                            </div>
                            
                            <!-- Duplicate testimonials for seamless loop -->
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=AS" alt="Student photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "RSM didn't just teach me formulas. My coach taught me how to think strategically under pressure. That's what got me to the AIME."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Alex Johnson</p>
                                    <p class="text-xs text-gray-500">AIME Qualifier, Grade 10</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=MG" alt="Parent photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "We saw our daughter's confidence skyrocket. The skills she learned didn't just help her in math; they helped her excel in all her AP classes."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Maria Garcia</p>
                                    <p class="text-xs text-gray-500">Parent of 8th Grader</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=SC" alt="Student photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "Making USAMO was a dream come true. RSM's advanced training prepared me for problems I never thought I could solve."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Sophia Chen</p>
                                    <p class="text-xs text-gray-500">USAMO Qualifier, Grade 11</p>
                                </div>
                            </div>
                            
                            <div class="testimonial-card">
                                <img src="https://placehold.co/80x80/005dab/ffffff?text=JP" alt="Parent photo" class="w-20 h-20 rounded-full mx-auto mb-4 border-4 border-white shadow-lg">
                                <blockquote class="text-gray-600 italic text-sm mb-4">
                                    "The growth mindset RSM instilled in my son extends far beyond mathematics. He approaches all challenges with confidence now."
                                </blockquote>
                                <div class="text-center">
                                    <p class="font-bold text-rsm-dark-blue text-sm">Jennifer Park</p>
                                    <p class="text-xs text-gray-500">Parent of 9th Grader</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gradient overlays for smooth edges -->
                    <div class="absolute top-0 left-0 w-20 h-full bg-gradient-to-r from-rsm-light-gray to-transparent z-10 pointer-events-none"></div>
                    <div class="absolute top-0 right-0 w-20 h-full bg-gradient-to-l from-rsm-light-gray to-transparent z-10 pointer-events-none"></div>
                </div>
            </div>
        </section>

        <section id="coaches" class="py-20 md:py-24 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-rsm-dark-blue">Learn from the Best</h2>
                    <p class="mt-4 text-lg text-gray-600 max-w-4xl mx-auto">The power of RSM lies in our math logic and competition prep, led by world-class educators. This journey is more than just academic — it's a path of discovery that equips students with tools for life and unlocks a deeper understanding of the world.</p>
                </div>
                <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="text-center">
                        <img src="assets/images/Tatyana.jpeg" class="w-40 h-40 rounded-full mx-auto mb-4 shadow-lg object-cover" alt="Tatyana Felikson">
                        <h4 class="font-bold text-xl text-rsm-dark-blue">Tatyana Felikson</h4>
                        <p class="text-rsm-blue font-medium mb-2">Head of MCP Department, Principal</p>
                        <p class="text-gray-600 text-sm">As the architect of our foundational competitive program, Tatyana masterfully transforms young students' curiosity into formidable problem-solving skills. Her leadership ensures every student begins their journey with confidence, pioneering key online initiatives to make elite training accessible to all.</p>
                    </div>
                    <div class="text-center">
                        <img src="assets/images/Jan.webp" class="w-40 h-40 rounded-full mx-auto mb-4 shadow-lg object-cover" alt="Dr. Jan Shubert">
                        <h4 class="font-bold text-xl text-rsm-dark-blue">Dr. Jan Shubert</h4>
                        <p class="text-rsm-blue font-medium mb-2">Head of Math Competition Programs</p>
                        <p class="text-gray-600 text-sm">Dr. Shubert leads our programs with a core belief that consistency and passion forge champions. He has translated this philosophy into a structured training environment that consistently produces AIME qualifiers and equips students with essential mental resilience.</p>
                    </div>
                    <div class="text-center">
                        <img src="assets/images/dmitrii.webp" class="w-40 h-40 rounded-full mx-auto mb-4 shadow-lg object-cover" alt="Dmitrii Trushchin">
                        <h4 class="font-bold text-xl text-rsm-dark-blue">Dmitrii Trushchin</h4>
                        <p class="text-rsm-blue font-medium mb-2">Grades 4-5 Program Lead</p>
                        <p class="text-gray-600 text-sm">With over 15 years of experience, Dmitrii is an award-winning coach, recognized for his success in preparing members of the Russian national math team. He specializes in sparking a love for complex problems in our youngest students.</p>
                    </div>
                    <div class="text-center">
                        <img src="assets/images/evgenii.jpg" class="w-40 h-40 rounded-full mx-auto mb-4 shadow-lg object-cover" alt="Evgeny Epifanov">
                        <h4 class="font-bold text-xl text-rsm-dark-blue">Evgeny Epifanov</h4>
                        <p class="text-rsm-blue font-medium mb-2">Grades 6-7 Program Innovator</p>
                        <p class="text-gray-600 text-sm">For nearly a decade, Evgeny has pioneered the use of modern teaching tools like storytelling and edutainment to make advanced topics engaging. He helps students prepare for difficult challenges with genuine interest and curiosity.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="faq" class="py-20 md:py-24 bg-rsm-light-gray">
            <div class="container mx-auto px-6 max-w-4xl">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-rsm-dark-blue">Frequently Asked Questions</h2>
                </div>
                <div class="space-y-4">
                    <!-- First 5 FAQ Items (Always Visible) -->
                    <!-- FAQ Item 1 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                        <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                            <span class="font-semibold text-lg text-rsm-dark-blue">The name is the "Russian" School of Math. What does this "Russian" methodology actually mean for my child?</span>
                            <i data-feather="chevron-down" class="transition-transform"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-6 pt-0 text-gray-700">
                                <p>The "Russian" in our name comes from our approach, which is based on the elite mathematics schools of the former Soviet Union and adapted for the U.S. environment. This methodology has a long and storied history of success, consistently producing many of the world's top performers in international math olympiads.</p>
                                <p class="mt-4">According to this tradition, the study of mathematics is the pre-eminent tool of mental development. For your child, this means we teach math in a way that not only builds mathematical excellence but also develops intellect and character. Our curriculum focuses on deep conceptual understanding over memorization, teaching students to think logically and creatively. This approach equips them with a powerful framework for problem-solving that will benefit them far beyond mathematics.</p>
                                <div class="mt-6 bg-gray-50 p-4 rounded-lg">
                                    <p class="text-sm text-gray-700 mb-1">Learn more about the educational philosophy that has powered our students' success for over two decades.</p>
                                    <a href="#" class="text-rsm-blue hover:underline font-semibold text-sm">Blog Post: "The RSM Difference: A Deep Dive into Our Classroom Methodology."</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- FAQ Item 2 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                        <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                            <span class="font-semibold text-lg text-rsm-dark-blue">How do you determine the right competition program and level for each student?</span>
                            <i data-feather="chevron-down" class="transition-transform"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-6 pt-0 text-gray-700">
                                <p>Finding the perfect fit is essential for a student's confidence and growth. Our placement process is comprehensive and free of charge. It begins with a multi-part evaluation that assesses not just a student's computational skills but also their logical reasoning and problem-solving abilities. Following the evaluation, we have a detailed discussion with you and your child to understand their goals, learning style, and previous experience. Based on both the evaluation results and this conversation, we recommend a specific program and level—whether it's building a foundation for the AMC 8 or tackling the advanced concepts required for the AIME.</p>
                                <div class="mt-6 bg-gray-50 p-4 rounded-lg">
                                    <p class="text-sm text-gray-700 mb-1">Understand our evaluation process and schedule your child's free placement test today.</p>
                                    <a href="#" class="text-rsm-blue hover:underline font-semibold text-sm">Blog Post: "A Look Inside the RSM Placement Evaluation: Finding the Perfect Starting Point."</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- FAQ Item 3 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                        <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                            <span class="font-semibold text-lg text-rsm-dark-blue">What qualifications do your competition coaches have?</span>
                            <i data-feather="chevron-down" class="transition-transform"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-6 pt-0 text-gray-700">
                                <p>We believe that an expert coach is fundamental to a student's success. Every RSM competition coach holds a degree in mathematics or a related field and, most importantly, possesses a deep passion for the subject. Before leading a classroom, all instructors undergo extensive, mandatory training in our unique methodology to ensure a consistent and high-quality learning experience. Many of our coaches are also former high-level math competitors themselves, bringing invaluable firsthand experience and strategic insight to their teaching.</p>
                                <div class="mt-6 bg-gray-50 p-4 rounded-lg">
                                    <p class="text-sm text-gray-700 mb-1">Learn more about the experts who will be guiding your child.</p>
                                    <a href="#" class="text-rsm-blue hover:underline font-semibold text-sm">Blog Post: "Meet the Minds: The Anatomy of an RSM Competition Coach."</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- FAQ Item 4 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                        <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                            <span class="font-semibold text-lg text-rsm-dark-blue">What is the expected time commitment for the competition program?</span>
                            <i data-feather="chevron-down" class="transition-transform"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-6 pt-0 text-gray-700">
                                <p>Our Math Competition Preparation (MCP) program typically involves one 90-minute class per week. To reinforce concepts, students are assigned a weekly homework assignment, which generally requires an additional 1-2 hours of focused work. The National Math Competition Preparation (NMCP) program is more intensive, with a workload that adapts to the competition calendar. We design our programs to be challenging yet manageable, fostering deep learning and passion without overwhelming students.</p>
                                <div class="mt-6 bg-gray-50 p-4 rounded-lg">
                                    <p class="text-sm text-gray-700 mb-1">Get tips on time management and creating effective study habits on our blog.</p>
                                    <a href="#" class="text-rsm-blue hover:underline font-semibold text-sm">Blog Post: "Finding the Balance: Integrating Advanced Math into a Busy Student's Schedule."</a>
                                </div>
                            </div>
                        </div>
                    </div>
                     <!-- FAQ Item 5 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                        <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                            <span class="font-semibold text-lg text-rsm-dark-blue">How does the competition program fit with a demanding school schedule and impact school grades?</span>
                            <i data-feather="chevron-down" class="transition-transform"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="p-6 pt-0 text-gray-700">
                                <p>We design our program to be a powerful supplement to a student's education. Our class schedules include after-school and weekend options to integrate smoothly with demanding school commitments. While we don't guarantee specific grade improvements, many parents report that their children become more confident and successful in their school's math classes. Our program focuses on developing deep conceptual understanding and advanced problem-solving skills. By learning to think logically and creatively, students are better equipped to tackle any mathematical challenge, which often leads to improved performance and a greater appreciation for the subject across the board.</p>
                                <div class="mt-6 bg-gray-50 p-4 rounded-lg">
                                    <p class="text-sm text-gray-700 mb-1">Discover how the RSM methodology enhances overall academic performance.</p>
                                    <a href="#" class="text-rsm-blue hover:underline font-semibold text-sm">Blog Post: "Beyond Formulas: How Rigorous Math Training Creates Better All-Around Students."</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Show More FAQs Button -->
                    <div class="text-center mt-8" id="show-more-container">
                        <button id="show-more-faqs" class="group text-rsm-blue hover:text-rsm-dark-blue font-medium text-sm transition-all duration-300 flex items-center mx-auto">
                            <span class="border-b border-rsm-blue/30 group-hover:border-rsm-dark-blue/50 transition-colors">Show More Questions</span>
                            <i data-feather="chevron-down" class="ml-2 w-4 h-4 transition-transform duration-300" id="faq-arrow"></i>
                        </button>
                    </div>
                    
                    <!-- Additional FAQ Items (Initially Hidden) -->
                    <div id="additional-faqs" class="space-y-4 mt-8 hidden">
                        <!-- FAQ Item 6 -->
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                            <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                                <span class="font-semibold text-lg text-rsm-dark-blue">How are parents kept informed of their child's progress?</span>
                                <i data-feather="chevron-down" class="transition-transform"></i>
                            </button>
                            <div class="accordion-content">
                                <div class="p-6 pt-0 text-gray-700">
                                    <p>We believe in a strong parent-teacher partnership. You can track your child's progress, view assignments, and see results through our dedicated parent portal, which is updated regularly. Additionally, our instructors provide detailed feedback reports at key points throughout the semester, highlighting areas of strength and opportunities for growth. For more specific questions, teachers are available for brief discussions before or after class.</p>
                                    <div class="mt-6 bg-gray-50 p-4 rounded-lg">
                                        <p class="text-sm text-gray-700 mb-1">Learn how to partner with us in tracking your child's journey.</p>
                                        <a href="#" class="text-rsm-blue hover:underline font-semibold text-sm">Blog Post: "A Parent's Guide to the RSM Portal: Tracking Progress Together."</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- FAQ Item 7 -->
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                            <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                                <span class="font-semibold text-lg text-rsm-dark-blue">How does this program help with college applications?</span>
                                <i data-feather="chevron-down" class="transition-transform"></i>
                            </button>
                            <div class="accordion-content">
                                <div class="p-6 pt-0 text-gray-700">
                                    <p>Elite universities seek students who demonstrate intellectual vitality, resilience, and a passion for challenges. Our program is designed to forge these exact traits. The intense training and high-level competition experience shape students into exceptional candidates, providing compelling material for their applications and essays. The national awards our students earn are simply the evidence of this deeper transformation. We prepare students not just for college applications, but to thrive once they get there.</p>
                                    <div class="mt-6 bg-gray-50 p-4 rounded-lg">
                                        <p class="text-sm text-gray-700 mb-1">Read more about how our students stand out in the competitive college application process.</p>
                                        <a href="#" class="text-rsm-blue hover:underline font-semibold text-sm">Blog Post: "Intellectual Vitality: The RSM Factor in College Admissions."</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- FAQ Item 8 -->
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                            <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                                <span class="font-semibold text-lg text-rsm-dark-blue">How do you prepare students for the pressure of a timed competition environment?</span>
                                <i data-feather="chevron-down" class="transition-transform"></i>
                            </button>
                            <div class="accordion-content">
                                <div class="p-6 pt-0 text-gray-700">
                                    <p>Our curriculum is designed to build confidence and resilience right from the start. We integrate timed practice tests and strategic coaching on pacing, focus, and managing test anxiety. By creating a supportive classroom environment and demystifying the test format, we help students become comfortable with the pressures of competition. This approach ensures they can perform their best when it counts, turning potential anxiety into focused energy.</p>
                                    <div class="mt-6 bg-gray-50 p-4 rounded-lg">
                                        <p class="text-sm text-gray-700 mb-1">Read more on our blog about how we foster a healthy relationship with challenges.</p>
                                        <a href="#" class="text-rsm-blue hover:underline font-semibold text-sm">Blog Post: "More Than a Score: How We Build Resilient Problem-Solvers."</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- FAQ Item 9 -->
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                            <button class="accordion-header w-full flex justify-between items-center text-left p-6">
                                <span class="font-semibold text-lg text-rsm-dark-blue">My child will be participating online. How do you create an engaging and effective virtual classroom for competition prep?</span>
                                <i data-feather="chevron-down" class="transition-transform"></i>
                            </button>
                            <div class="accordion-content">
                                <div class="p-6 pt-0 text-gray-700">
                                    <p>Our virtual classrooms are purpose-built to be as interactive and collaborative as our physical ones. We use a state-of-the-art online platform that allows for real-time interaction with the teacher and with peers. Instructors use digital whiteboards to illustrate complex problems, and students can "raise their hand" and work through solutions live. We maintain small class sizes to ensure every student gets individual attention. This ensures our online competition prep students receive the same rigorous, engaging, and high-quality instruction as their in-person peers.</p>
                                    <div class="mt-6 bg-gray-50 p-4 rounded-lg">
                                        <p class="text-sm text-gray-700 mb-1">See how we make online learning interactive and effective on our blog.</p>
                                        <a href="#" class="text-rsm-blue hover:underline font-semibold text-sm">Blog Post: "Inside an RSM Online Classroom: A Tour of Our Virtual Learning Environment."</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-12 text-center">
                    <p class="text-gray-600">Can't find the answer you're looking for? Visit our full <a href="pages/faq.html" class="text-rsm-blue font-semibold underline hover:text-rsm-dark-blue">FAQ page</a> or <a href="#contact" class="text-rsm-blue font-semibold underline hover:text-rsm-dark-blue">contact us</a> directly.</p>
                </div>
            </div>
        </section>

        <section id="find-school" class="py-20 md:py-24 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-rsm-dark-blue mb-8">Find Your School</h2>
                    <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                        With locations across the United States, Canada, Israel, and the UAE, there's likely an RSM center near you. Explore our locations on the map below.
                    </p>
                </div>
                
                <!-- Custom Interactive Google Maps with RSM Locations -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-8 google-maps-container">
                    <div id="find-school-map" style="width: 100%; height: 490px;"></div>
                </div>
                
                <div class="text-center">
                    <a href="pages/locations.html" class="inline-block bg-rsm-gold text-rsm-dark-blue font-bold py-4 px-10 rounded-lg shadow-lg hover:bg-yellow-500 transition-transform transform hover:scale-105 text-lg mr-4">
                        View All Locations
                    </a>
                    <a href="#contact" class="inline-block bg-rsm-blue text-white font-bold py-4 px-10 rounded-lg shadow-lg hover:bg-rsm-dark-blue transition-transform transform hover:scale-105 text-lg">
                        Schedule Assessment
                    </a>
                    <p class="mt-6 text-gray-600">
                        Want to search by ZIP code or city name? <a href="pages/locations.html" class="text-rsm-blue font-semibold underline hover:text-rsm-dark-blue">Visit our full locations page</a>.
                    </p>
                </div>
            </div>
        </section>

        <section id="contact" class="py-20 md:py-32 bg-rsm-blue text-white">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-5xl font-extrabold">Ready to Begin Your Child's Journey?</h2>
                <p class="mt-6 text-lg md:text-xl max-w-3xl mx-auto text-blue-100">
                    The first step is a comprehensive, no-obligation assessment with one of our program advisors. We will help you understand your child's current strengths and place them on the right path for success.
                </p>
                <div class="mt-10">
                    <button id="schedule-assessment-btn" class="bg-rsm-gold text-rsm-dark-blue font-bold py-4 px-10 rounded-lg shadow-xl hover:bg-yellow-500 transition-transform transform hover:scale-105 text-lg">
                        Schedule Your Free Assessment Now
                    </button>
                </div>
                <div class="mt-12 border-t border-blue-400/50 pt-8">
                    <h3 class="text-2xl font-bold text-white mb-4">Contact Us</h3>
                    <p class="text-blue-200">Have specific questions? Reach out to our competition program advisors.</p>
                    <p class="mt-4 text-lg">
                        <a href="mailto:online.competition@mathschool.com" class="font-bold underline hover:text-white">online.competition@mathschool.com</a>
                    </p>
                    <p class="mt-2 text-lg">
                        <a href="tel:1-800-555-6284" class="font-bold underline hover:text-white">1-800-555-6284</a>
                    </p>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-rsm-primary text-white">
        <div class="rsm-container py-12">
            <div class="grid md:grid-cols-4 gap-8 mb-8">
                <!-- Logo and Description -->
                <div class="md:col-span-2">
                    <div class="flex items-center space-x-3 mb-4">
                        <img src="assets/RSM/rsm.svg" alt="RSM Logo" class="h-10 w-auto brightness-0 invert">
                        <div>
                            <div class="text-white font-bold text-xl">RSM Competition Program</div>
                            <div class="text-white/80 text-sm">Excellence in Mathematical Training</div>
                        </div>
                    </div>
                    <p class="text-white/90 mb-4 max-w-md">Transforming talented students into confident, resilient problem-solvers who excel in prestigious math competitions and beyond.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-white/80 hover:text-rsm-secondary transition-colors">
                            <i data-feather="facebook" class="w-5 h-5"></i>
                        </a>
                        <a href="#" class="text-white/80 hover:text-rsm-secondary transition-colors">
                            <i data-feather="twitter" class="w-5 h-5"></i>
                        </a>
                        <a href="#" class="text-white/80 hover:text-rsm-secondary transition-colors">
                            <i data-feather="linkedin" class="w-5 h-5"></i>
                        </a>
                        <a href="#" class="text-white/80 hover:text-rsm-secondary transition-colors">
                            <i data-feather="youtube" class="w-5 h-5"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h4 class="text-white font-semibold mb-4">Quick Links</h4>
                    <div class="space-y-2">
                        <a href="#why-rsm" class="block text-white/80 hover:text-rsm-secondary transition-colors text-sm">Why Competitions?</a>
                        <a href="#pathway" class="block text-white/80 hover:text-rsm-secondary transition-colors text-sm">The RSM Pathway</a>
                        <a href="#programs" class="block text-white/80 hover:text-rsm-secondary transition-colors text-sm">Programs</a>
                        <a href="#coaches" class="block text-white/80 hover:text-rsm-secondary transition-colors text-sm">Our Team</a>
                    </div>
                </div>
                
                <!-- Contact Info -->
                <div>
                    <h4 class="text-white font-semibold mb-4">Contact</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex items-center text-white/80">
                            <i data-feather="mail" class="w-4 h-4 mr-2 flex-shrink-0"></i>
                            <a href="mailto:online.competition@mathschool.com" class="hover:text-rsm-secondary transition-colors">online.competition@mathschool.com</a>
                        </div>
                        <div class="flex items-center text-white/80">
                            <i data-feather="phone" class="w-4 h-4 mr-2 flex-shrink-0"></i>
                            <a href="tel:1-800-555-6284" class="hover:text-rsm-secondary transition-colors">1-800-555-6284</a>
                        </div>
                        <div class="flex items-center text-white/80">
                            <i data-feather="map-pin" class="w-4 h-4 mr-2 flex-shrink-0"></i>
                            <span>Multiple Locations</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bottom Bar -->
            <div class="border-t border-white/20 pt-6 flex flex-col md:flex-row justify-between items-center">
                <p class="text-white/80 text-sm">&copy; 2025 Russian School of Mathematics. All Rights Reserved.</p>
                <div class="flex space-x-6 mt-4 md:mt-0">
                    <a href="#" class="text-white/80 hover:text-rsm-secondary transition-colors text-sm">Privacy Policy</a>
                    <a href="#" class="text-white/80 hover:text-rsm-secondary transition-colors text-sm">Terms of Service</a>
                    <a href="#" class="text-white/80 hover:text-rsm-secondary transition-colors text-sm">Accessibility</a>
                </div>
            </div>
        </div>
    </footer>

    <div id="gemini-modal" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 md:p-8 max-w-2xl w-full m-4 transform transition-all duration-300 ease-out scale-95" id="gemini-modal-content-area">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-xl md:text-2xl font-bold text-rsm-dark-blue">Generating Problem...</h3>
                <button id="modal-close-btn-x" class="text-gray-400 hover:text-gray-600 text-3xl leading-none">&times;</button>
            </div>
            <div id="modal-content" class="text-base max-h-[60vh] overflow-y-auto pr-2">
                <div id="modal-loader" class="flex justify-center items-center py-8">
                    <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-rsm-blue"></div>
                </div>
                </div>
            <div class="mt-6 text-right border-t pt-4">
                <button id="modal-close-btn" class="bg-rsm-blue text-white font-bold py-2 px-6 rounded-lg hover:bg-rsm-dark-blue transition-colors">Close</button>
            </div>
        </div>
    </div>

    <!-- Assessment Scheduling Modal -->
    <div id="assessment-modal" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 md:p-8 max-w-2xl w-full m-4 transform transition-all duration-300 ease-out scale-95" id="assessment-modal-content-area">
            <div class="flex justify-between items-center mb-6">
                <h3 id="assessment-modal-title" class="text-2xl md:text-3xl font-bold text-rsm-dark-blue">Schedule Your Free Assessment</h3>
                <button id="assessment-close-btn-x" class="text-gray-400 hover:text-gray-600 text-3xl leading-none">&times;</button>
            </div>
            
            <form id="assessment-form" class="space-y-6">
                <!-- Step 1: Basic Information -->
                <div id="step-1" class="form-step">
                    <div class="mb-6">
                        <div class="flex items-center space-x-2 mb-4">
                            <div class="w-8 h-8 bg-rsm-blue text-white rounded-full flex items-center justify-center text-sm font-bold">1</div>
                            <span class="text-lg font-semibold text-gray-700">Student Information</span>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label for="student-name" class="block text-sm font-medium text-gray-700 mb-2">Student's Full Name *</label>
                            <input type="text" id="student-name" name="studentName" required 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rsm-blue focus:border-rsm-blue"
                                   placeholder="Enter student's name">
                        </div>
                        <div>
                            <label for="student-grade" class="block text-sm font-medium text-gray-700 mb-2">Current Grade *</label>
                            <select id="student-grade" name="studentGrade" required 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rsm-blue focus:border-rsm-blue">
                                <option value="">Select grade</option>
                                <option value="3">3rd Grade</option>
                                <option value="4">4th Grade</option>
                                <option value="5">5th Grade</option>
                                <option value="6">6th Grade</option>
                                <option value="7">7th Grade</option>
                                <option value="8">8th Grade</option>
                                <option value="9">9th Grade</option>
                                <option value="10">10th Grade</option>
                                <option value="11">11th Grade</option>
                                <option value="12">12th Grade</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label for="parent-name" class="block text-sm font-medium text-gray-700 mb-2">Parent/Guardian Name *</label>
                            <input type="text" id="parent-name" name="parentName" required 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rsm-blue focus:border-rsm-blue"
                                   placeholder="Enter your name">
                        </div>
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Phone Number *</label>
                            <input type="tel" id="phone" name="phone" required 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rsm-blue focus:border-rsm-blue"
                                   placeholder="(555) 123-4567">
                        </div>
                    </div>
                    
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
                        <input type="email" id="email" name="email" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rsm-blue focus:border-rsm-blue"
                               placeholder="parent@example.com">
                    </div>
                </div>
                
                <!-- Step 2: Background & Preferences -->
                <div id="step-2" class="form-step hidden">
                    <div class="mb-6">
                        <div class="flex items-center space-x-2 mb-4">
                            <div class="w-8 h-8 bg-rsm-blue text-white rounded-full flex items-center justify-center text-sm font-bold">2</div>
                            <span class="text-lg font-semibold text-gray-700">Background & Preferences</span>
                        </div>
                    </div>
                    
                    <div>
                        <label for="math-experience" class="block text-sm font-medium text-gray-700 mb-2">Math Competition Experience</label>
                        <select id="math-experience" name="mathExperience" 
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rsm-blue focus:border-rsm-blue">
                            <option value="none">No previous experience</option>
                            <option value="some">Some experience (local competitions)</option>
                            <option value="amc8">AMC 8 experience</option>
                            <option value="amc10-12">AMC 10/12 experience</option>
                            <option value="aime">AIME qualifier</option>
                            <option value="advanced">Advanced (USAMO/USAJMO)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="location-preference" class="block text-sm font-medium text-gray-700 mb-2">Preferred Location/Format</label>
                        <select id="location-preference" name="locationPreference" 
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rsm-blue focus:border-rsm-blue">
                            <option value="online">Online Classes</option>
                            <option value="in-person">In-Person Classes</option>
                            <option value="both">Both Options</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="goals" class="block text-sm font-medium text-gray-700 mb-2">Goals for Competition Program</label>
                        <textarea id="goals" name="goals" rows="3" 
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rsm-blue focus:border-rsm-blue"
                                  placeholder="What would you like your child to achieve through our competition program?"></textarea>
                    </div>
                </div>
                
                <!-- Step 3: Confirmation -->
                <div id="step-3" class="form-step hidden">
                    <div class="mb-6">
                        <div class="flex items-center space-x-2 mb-4">
                            <div class="w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center text-sm">✓</div>
                            <span class="text-lg font-semibold text-gray-700">Assessment Scheduled!</span>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                        <h4 class="font-semibold text-green-800 mb-3">Thank you for your interest in RSM Competition Program!</h4>
                        <div class="text-green-700 space-y-2">
                            <p>✓ Your assessment request has been received</p>
                            <p>✓ Our program advisor will contact you within 24 hours</p>
                            <p>✓ You'll receive a confirmation email shortly</p>
                        </div>
                        
                        <div class="mt-4 p-4 bg-white border border-green-200 rounded">
                            <p class="text-sm text-gray-600">
                                <strong>What's Next:</strong><br>
                                Our advisor will schedule a convenient time for your child's assessment, discuss program options, and answer any questions you may have about our competition pathway.
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Form Navigation -->
                <div class="flex justify-between items-center pt-6 border-t">
                    <button type="button" id="prev-step-btn" class="px-6 py-2 text-gray-600 hover:text-gray-800 font-medium hidden">
                        ← Previous
                    </button>
                    <div class="flex space-x-2">
                        <div class="step-indicator w-3 h-3 rounded-full bg-rsm-blue"></div>
                        <div class="step-indicator w-3 h-3 rounded-full bg-gray-300"></div>
                        <div class="step-indicator w-3 h-3 rounded-full bg-gray-300"></div>
                    </div>
                    <button type="button" id="next-step-btn" class="px-6 py-2 bg-rsm-blue text-white rounded-lg hover:bg-rsm-dark-blue font-medium">
                        Next →
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // --- Global Map Variables ---
        let map;
        let markers = [];

        // --- Initialize Leaflet Map for Find School Section ---
        function initMap() {
            const mapElement = document.getElementById('find-school-map');
            if (mapElement && typeof L !== 'undefined') {
                // Initialize the Leaflet map
                map = L.map('find-school-map').setView([39.8283, -98.5795], 4);
                
                // Add OpenStreetMap tiles
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '© OpenStreetMap contributors'
                }).addTo(map);
                
                // Add markers for all RSM locations
                addLeafletMarkers();
            }
        }
        
        // --- Add Leaflet Markers for RSM Locations ---
        function addLeafletMarkers() {
            const allLocations = getAllLocations();
            
            allLocations.forEach(location => {
                // Create custom marker
                const marker = L.marker([location.lat, location.lng]).addTo(map);
                
                // Create popup content with website link
                const locationURL = generateLocationURL(location);
                const popupContent = `
                    <div style="padding: 8px; min-width: 200px;">
                        <h3 style="margin: 0 0 8px 0; color: #005dab; font-weight: bold;">RSM ${location.name}</h3>
                        <div style="margin: 4px 0; color: #666; font-size: 12px;"><strong>Name:</strong> RSM ${location.name}</div>
                        <div style="margin: 4px 0; color: #666; font-size: 12px;"><strong>Address:</strong> ${location.name}</div>
                        <div style="margin: 4px 0; color: #666; font-size: 12px;"><strong>City:</strong> ${location.name}</div>
                        <div style="margin: 4px 0; color: #666; font-size: 12px;"><strong>State:</strong> ${location.state}</div>
                        <div style="margin: 4px 0; color: #666; font-size: 12px;"><strong>Country:</strong> ${location.country}</div>
                        <div style="margin: 4px 0; color: #666; font-size: 12px;"><strong>ZIP:</strong> ${location.zip || 'N/A'}</div>
                        <div style="margin: 4px 0; color: #666; font-size: 12px;"><strong>Latitude:</strong> ${location.lat}</div>
                        <div style="margin: 4px 0; color: #666; font-size: 12px;"><strong>Longitude:</strong> ${location.lng}</div>
                        <div style="margin: 4px 0 8px 0; color: #666; font-size: 12px;"><strong>Description:</strong> Russian School of Mathematics - Competition Math Program</div>
                        <div style="margin-top: 12px;">
                            <a href="${locationURL}" target="_blank" style="display: inline-block; background: #005dab; color: white; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 12px; font-weight: bold;">
                                🏫 Visit ${location.name} Website
                            </a>
                        </div>
                    </div>
                `;
                
                marker.bindPopup(popupContent);
                markers.push(marker);
            });
        }

        // --- Initial Setup ---
        // This function runs when the DOM is fully loaded.
        document.addEventListener('DOMContentLoaded', () => {
            
            // Initialize Feather Icons
            feather.replace();
            
            // Initialize the map
            initMap();

            // --- Mobile Menu Toggle ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }

            // --- FAQ Show More/Less Functionality ---
            const showMoreButton = document.getElementById('show-more-faqs');
            const showMoreContainer = document.getElementById('show-more-container');
            const additionalFaqs = document.getElementById('additional-faqs');
            const faqArrow = document.getElementById('faq-arrow');
            let isExpanded = false;

            if (showMoreButton && additionalFaqs && faqArrow && showMoreContainer) {
                showMoreButton.addEventListener('click', () => {
                    if (!isExpanded) {
                        // Expand - rotate arrow and fade out button
                        faqArrow.style.transform = 'rotate(180deg)';
                        
                        // Fade out the container
                        showMoreContainer.style.opacity = '0';
                        showMoreContainer.style.transform = 'translateY(-10px)';
                        
                        setTimeout(() => {
                            showMoreContainer.style.display = 'none';
                            additionalFaqs.classList.remove('hidden');
                            isExpanded = true;
                        }, 300);
                    }
                });
            }

            // --- Accordion Functionality for FAQ ---
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            accordionHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('svg');

                    // Check if the current accordion is open
                    const isOpen = content.style.maxHeight;

                    // Close all other accordions first
                    accordionHeaders.forEach(otherHeader => {
                        if (otherHeader !== header) {
                            const otherContent = otherHeader.nextElementSibling;
                            const otherIcon = otherHeader.querySelector('svg');
                            if (otherContent) {
                                otherContent.style.maxHeight = null;
                            }
                            if (otherIcon) {
                                otherIcon.style.transform = 'rotate(0deg)';
                            }
                        }
                    });

                    // Toggle the clicked accordion
                    if (isOpen) {
                        content.style.maxHeight = null;
                        if (icon) icon.style.transform = 'rotate(0deg)';
                    } else {
                        if (content) {
                            content.style.maxHeight = content.scrollHeight + "px";
                        }
                        if (icon) icon.style.transform = 'rotate(180deg)';
                    }
                });
            });

            // --- Gemini API Feature Script ---
            const modal = document.getElementById('gemini-modal');
            const modalContentArea = document.getElementById('gemini-modal-content-area');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            const modalLoader = document.getElementById('modal-loader');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const modalCloseBtnX = document.getElementById('modal-close-btn-x');
            const generateButtons = document.querySelectorAll('.generate-problem-btn');

            const prompts = {
                mcp: {
                    title: "Sample MCP Problem",
                    prompt: "As an expert in mathematics education for gifted youth, generate a single, challenging math problem suitable for a talented middle school student preparing for competitions like the AMC 8 or Purple Comet. The problem should require logical reasoning or creative thinking, not just standard algorithms. Format the output clearly with 'Problem:' on one line, followed by the problem statement, and then 'Solution:' on a new line, followed by a step-by-step explanation of the solution. Do not include any other text before 'Problem:' or after the solution."
                },
                nmcp: {
                    title: "Sample NMCP Problem",
                    prompt: "As an expert in advanced mathematics competitions, generate a single, difficult math problem appropriate for a top high school student preparing for the AIME (American Invitational Mathematics Examination). The problem should cover topics like advanced algebra, number theory, combinatorics, or geometry. Format the output clearly with 'Problem:' on one line, followed by the problem statement, and then 'Solution:' on a new line, followed by a detailed, step-by-step explanation of the solution. Do not include any other text before 'Problem:' or after the solution."
                }
            };

            async function callGemini(prompt) {
                // Use secure configuration
                const geminiConfig = window.RSMConfig.getSecureConfig('gemini');
                
                if (!geminiConfig) {
                    throw new Error("Gemini API is not properly configured. Please contact support.");
                }
                
                const apiUrl = `${geminiConfig.apiUrl}?key=${geminiConfig.apiKey}`;
                
                const payload = {
                    contents: [{
                        role: "user",
                        parts: [{ text: prompt }]
                    }]
                };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'User-Agent': 'RSM-Competition-Website/1.0'
                        },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorText = await response.text();
                        console.error('API Error:', response.status, errorText);
                        throw new Error(`API request failed with status ${response.status}`);
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 && 
                        result.candidates[0].content && result.candidates[0].content.parts && 
                        result.candidates[0].content.parts.length > 0) {
                        return result.candidates[0].content.parts[0].text;
                    } else {
                        console.error("Unexpected API response structure:", result);
                        throw new Error("Invalid response structure from API");
                    }
                } catch (error) {
                    console.error('Gemini API call failed:', error);
                    throw new Error("Problem generation service is temporarily unavailable. Please try again later.");
                }
            }

            function openModal() {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                setTimeout(() => {
                    modal.style.opacity = '1';
                    modalContentArea.style.transform = 'scale(1)';
                }, 10);
            }

            function closeModal() {
                modal.style.opacity = '0';
                modalContentArea.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                }, 300);
            }

            generateButtons.forEach(button => {
                button.addEventListener('click', async (e) => {
                    e.preventDefault();
                    const level = button.dataset.level;
                    const { title, prompt } = prompts[level];

                    // Show modal first
                    openModal();
                    modalTitle.textContent = `✨ Generating ${title}...`;
                    modalContent.innerHTML = '';
                    modalLoader.style.display = 'flex';
                    modalContent.appendChild(modalLoader);

                    // Check if API is configured
                    const geminiConfig = window.RSMConfig.getSecureConfig('gemini');
                    if (!geminiConfig) {
                        modalTitle.textContent = "Demo Mode";
                        modalLoader.style.display = 'none';
                        modalContent.innerHTML = `
                            <div class="space-y-4 text-left">
                                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                    <h4 class="font-semibold text-blue-800 mb-2">Sample ${title.replace('Sample ', '')}</h4>
                                    <p class="font-semibold text-gray-800 mb-3">
                                        ${level === 'mcp' ? 
                                            'Find the number of ways to arrange the letters in the word COMPETITION such that no two vowels are adjacent.' :
                                            'Let p be a prime number greater than 3. Prove that p² - 1 is divisible by 24.'
                                        }
                                    </p>
                                    <hr class="my-4">
                                    <p class="font-bold text-rsm-blue mb-2">Solution:</p>
                                    <p class="text-gray-600 text-sm">
                                        ${level === 'mcp' ? 
                                            'This is a demo problem. In the full version, our AI would generate a complete solution with step-by-step explanations tailored to your level.' :
                                            'This is a demo problem. In the full version, our AI would provide detailed proof techniques and explanations for advanced competition problems.'
                                        }
                                    </p>
                                </div>
                                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                                    <p class="text-sm text-yellow-800">
                                        <strong>Note:</strong> Problem generation is currently in demo mode. Contact us to learn more about our AI-powered practice problems.
                                    </p>
                                </div>
                            </div>
                        `;
                        return;
                    }

                    try {
                        const resultText = await callGemini(prompt);
                        
                        // Sanitize and format the output
                        let problem = "Could not parse problem.";
                        let solution = "No solution was provided.";

                        if (resultText.includes('Solution:')) {
                            let parts = resultText.split('Solution:');
                            problem = parts[0].replace('Problem:', '').trim();
                            solution = parts[1].trim();
                        } else {
                            problem = resultText.replace('Problem:', '').trim();
                        }


                        const formattedHtml = `
                            <div class="space-y-4 text-left">
                                <p class="font-semibold text-gray-800">${problem.replace(/\n/g, '<br>')}</p>
                                <hr class="my-4">
                                <p class="font-bold text-rsm-blue">Solution:</p>
                                <p class="text-gray-600">${solution.replace(/\n/g, '<br>')}</p>
                            </div>
                        `;

                        modalTitle.textContent = `✨ ${title}`;
                        modalLoader.style.display = 'none';
                        modalContent.innerHTML = formattedHtml;

                    } catch (error) {
                        console.error("Gemini API call failed:", error);
                        modalTitle.textContent = "Error";
                        modalLoader.style.display = 'none';
                        modalContent.innerHTML = `<p class="text-red-500 text-center">Sorry, we couldn't generate a problem at this time. This may be due to high demand or a network issue. Please try again later.</p>`;
                    }
                });
            });

            modalCloseBtn.addEventListener('click', closeModal);
            modalCloseBtnX.addEventListener('click', closeModal);

            // Close modal if clicking on the background overlay
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeModal();
                }
            });
        });

        // --- Assessment Form Modal ---
        const assessmentModal = document.getElementById('assessment-modal');
        const assessmentModalContentArea = document.getElementById('assessment-modal-content-area');
        const assessmentCloseBtn = document.getElementById('assessment-close-btn-x');
        const scheduleAssessmentBtn = document.getElementById('schedule-assessment-btn');
        const assessmentForm = document.getElementById('assessment-form');
        const prevStepBtn = document.getElementById('prev-step-btn');
        const nextStepBtn = document.getElementById('next-step-btn');
        const stepIndicators = document.querySelectorAll('.step-indicator');
        const formSteps = document.querySelectorAll('.form-step');

        let currentStep = 1;
        const totalSteps = 3;

        function openAssessmentModal() {
            assessmentModal.classList.remove('hidden');
            assessmentModal.classList.add('flex');
            setTimeout(() => {
                assessmentModal.style.opacity = '1';
                assessmentModalContentArea.style.transform = 'scale(1)';
            }, 10);
        }

        function closeAssessmentModal() {
            assessmentModal.style.opacity = '0';
            assessmentModalContentArea.style.transform = 'scale(0.95)';
            setTimeout(() => {
                assessmentModal.classList.add('hidden');
                assessmentModal.classList.remove('flex');
                // Reset form to step 1
                currentStep = 1;
                showStep(currentStep);
                assessmentForm.reset();
            }, 300);
        }

        function showStep(step) {
            // Hide all steps
            formSteps.forEach(stepEl => stepEl.classList.add('hidden'));
            
            // Show current step
            const currentStepEl = document.getElementById(`step-${step}`);
            if (currentStepEl) {
                currentStepEl.classList.remove('hidden');
            }

            // Update step indicators
            stepIndicators.forEach((indicator, index) => {
                if (index < step) {
                    indicator.classList.remove('bg-gray-300');
                    indicator.classList.add('bg-rsm-blue');
                } else {
                    indicator.classList.remove('bg-rsm-blue');
                    indicator.classList.add('bg-gray-300');
                }
            });

            // Update navigation buttons
            prevStepBtn.classList.toggle('hidden', step === 1);
            
            if (step === totalSteps) {
                nextStepBtn.style.display = 'none';
            } else {
                nextStepBtn.style.display = 'block';
                nextStepBtn.textContent = step === totalSteps - 1 ? 'Submit' : 'Next →';
            }
        }

        function validateStep(step) {
            const stepEl = document.getElementById(`step-${step}`);
            const requiredFields = stepEl.querySelectorAll('input[required], select[required]');
            
            for (let field of requiredFields) {
                if (!field.value.trim()) {
                    field.focus();
                    field.classList.add('border-red-500');
                    setTimeout(() => field.classList.remove('border-red-500'), 3000);
                    return false;
                }
            }
            return true;
        }

        function submitAssessmentForm() {
            // Collect form data
            const formData = new FormData(assessmentForm);
            const data = Object.fromEntries(formData.entries());
            
            // In a real application, you would send this data to your backend
            console.log('Assessment form data:', data);
            
            // Show success step
            currentStep = 3;
            showStep(currentStep);
            
            // Here you would typically send the data to your server
            // fetch('/api/schedule-assessment', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify(data)
            // });
        }

        // Event listeners
        scheduleAssessmentBtn.addEventListener('click', openAssessmentModal);
        assessmentCloseBtn.addEventListener('click', closeAssessmentModal);
        
        // Handle all schedule assessment buttons
        document.querySelectorAll('.schedule-assessment-btn').forEach(btn => {
            btn.addEventListener('click', openAssessmentModal);
        });

        nextStepBtn.addEventListener('click', () => {
            if (currentStep < totalSteps - 1) {
                if (validateStep(currentStep)) {
                    currentStep++;
                    showStep(currentStep);
                }
            } else if (currentStep === totalSteps - 1) {
                if (validateStep(currentStep)) {
                    submitAssessmentForm();
                }
            }
        });

        prevStepBtn.addEventListener('click', () => {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        });

        // Close modal if clicking on background
        assessmentModal.addEventListener('click', (event) => {
            if (event.target === assessmentModal) {
                closeAssessmentModal();
            }
        });

        // Initialize form
        showStep(currentStep);
        
        // Function to scroll to locations page
        function scrollToLocations() {
            window.location.href = 'pages/locations.html';
        }
    </script>
    
    <script src="assets/js/logo3d.js"></script>

</body>
</html>
